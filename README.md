# Notification Service Manager
___
**Stack**: Java, Spring Boot, PostgreSQL, Kafka, Liquibase, Docker.
___

## Назначение сервиса

Данный сервис управляет запланированными рассылками и подписками на них.

__Механизм отправки запланированных уведомлений__
На данный момент реализован функционал отправки рассылок, которые запланированы на определенную дату и время. 
Происходит это с помощью `ScheduledExecutorService` с интервалом, который задается в конфигурации приложения (`application.yml`). 
После получения запланированных рассылок в отдельном потоке для каждой рассылки происходит их процессинг и отправка 
в другой топик Kafka, который вычитывает <a href ="https://github.com/Therenegadee/notification-service-sender">Notification Sender (отправщик сообщений)</a> 
для отправки по каналам распространения уведомлений, так как пользователь может быть подписан на рассылки определенных видов 
уведомлений сразу в несколько каналов (например, телеграм, почта).

__Механизм подстановки placeholder'ов__

Также в данном сервисе предусмотрен механизм подстановки значений с различной информацией из других сервисов в формате 
плейсхолдеров. То есть при составлении сообщения для рассылки можно воспользоваться одним или несколькими плейсхолдерами, 
которые при процессинге рассылки данным сервисом будут заполнены необходимыми данными. 

Например, есть необходимость сделать сообщения рассылок персонализированными (добавить обращение к получателю). 
Необходимо создать в Java коде интеграцию с сервисом, ответственным за информацию о пользователях, добавить эту информацию 
о плейсхолдере в Enum класс [PlaceholderType.java](src%2Fmain%2Fjava%2Fcom%2Fgithub%2Ftherenegade%2Fnotification%2Fmanager%2Fentity%2Fenums%2FPlaceholderType.java) 
и сохранить информацию о нем в Базе Данных. Далее, при составлении сообщения внутри текста необходимо обернуть данный 
плейсхолдер в формат SpEL плейсхолдеоов: ${placeholder_name}. Таким образом, сообщение, которое содержит в себе обращение 
к его получателю, может выглядеть следующим образом: 

> «Привет, ${recipient_name}! Хотим сообщить тебе, что мы обновляем политику…».

Код данного приложения сможет опознать эти плейсхолдеры и подставить в них необходимые значения, сходив в соответствующий (-ие) API
для извлечения данной информации.
___
## Документация API

Swagger UI будет доступен по адресу {root_uri}/swagger-ui.html. По данному адресу вы сможете увидеть endpoint'ы данного 
проекта и отправить на них запросы (примеры Request Body содержатся).